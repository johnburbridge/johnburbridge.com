/**
* This is the blog project's build file
* @author jburbridge
*/

description = "The ROOT webapp for johnburbridge.com"

def cargoPort = 9090;

dependencies {
	compile project(":apps:blog"),
		project(":apps:jukebox"),
		project(":common");
}

war {
    // strip out the version from the artifact
    // TODO: look into cargo plug-in for automating the deploy
    archiveName = baseName + '.war';
}

cargo {
    containerId = 'tomcat7x';
    port = cargoPort;
    context = 'ROOT';
/*
    remote {
        hostname = 'cloud.internal.it'
        username = 'superuser'
        password = 'secretpwd'
    }
*/
    local {
        homeDir = file(rootProject.rootDir.toString() + tomcatHome);
    }
}

task getPing() << {
    URL url = new URL("http://localhost:$cargoPort/ping.jsp");
    println url.text;
}




// jettyRun.jettyConfig = new File("src/main/resources/jetty.xml");
